"use strict";(globalThis.webpackChunkrelae_docs=globalThis.webpackChunkrelae_docs||[]).push([[373],{6899:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/webhook-modal-733e3037303892f6e57d48881f4fa506.png"},7327:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/bulk-retry-602f71d238401a4df430ce32f626df43.png"},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var s=i(6540);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}},9868:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"quickstart/receive-your-first-webhook","title":"Receive Your First Webhook","description":"Now that your account and destination are configured, let\'s send your first webhook through Relae!","source":"@site/docs/quickstart/receive-your-first-webhook.md","sourceDirName":"quickstart","slug":"/quickstart/receive-your-first-webhook","permalink":"/quickstart/receive-your-first-webhook","draft":false,"unlisted":false,"editUrl":"https://github.com/WillBallentine/relae-docs/tree/main/docs/quickstart/receive-your-first-webhook.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Account Setup","permalink":"/quickstart/setup"},"next":{"title":"What is Relae?","permalink":"/core-concepts/what-is-relae"}}');var r=i(4848),t=i(8453);const o={},l="Receive Your First Webhook",d={},a=[{value:"Overview",id:"overview",level:2},{value:"Step 1: Configure Your Vendor",id:"step-1-configure-your-vendor",level:2},{value:"General Steps (All Vendors)",id:"general-steps-all-vendors",level:3},{value:"Vendor-Specific Guides",id:"vendor-specific-guides",level:3},{value:"Step 2: Trigger a Test Event",id:"step-2-trigger-a-test-event",level:2},{value:"Stripe",id:"stripe",level:3},{value:"Shopify",id:"shopify",level:3},{value:"GitHub",id:"github",level:3},{value:"Step 3: View the Event in Relae",id:"step-3-view-the-event-in-relae",level:2},{value:"Click to View Details",id:"click-to-view-details",level:3},{value:"Step 4: Verify It Reached Your Application",id:"step-4-verify-it-reached-your-application",level:2},{value:"If using webhook.site or RequestBin",id:"if-using-webhooksite-or-requestbin",level:3},{value:"If using your own endpoint",id:"if-using-your-own-endpoint",level:3},{value:"What Gets Forwarded?",id:"what-gets-forwarded",level:3},{value:"Header Descriptions",id:"header-descriptions",level:4},{value:"Step 5: Verify the HMAC Signature (Recommended)",id:"step-5-verify-the-hmac-signature-recommended",level:2},{value:"Understanding the Signature",id:"understanding-the-signature",level:3},{value:"Get Your Webhook Secret",id:"get-your-webhook-secret",level:3},{value:"Verification Process",id:"verification-process",level:3},{value:"Code Examples",id:"code-examples",level:3},{value:"Node.js / Express",id:"nodejs--express",level:4},{value:"Python / Flask",id:"python--flask",level:4},{value:"Go",id:"go",level:4},{value:"Ruby / Sinatra",id:"ruby--sinatra",level:4},{value:"PHP",id:"php",level:4},{value:"Step 6: Test Failure Scenarios",id:"step-6-test-failure-scenarios",level:2},{value:"Simulate a Failure",id:"simulate-a-failure",level:3},{value:"What You&#39;ll See",id:"what-youll-see",level:3},{value:"Manual Retry from DLQ",id:"manual-retry-from-dlq",level:3},{value:"Success! \ud83c\udf89",id:"success-",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Need Help?",id:"need-help",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"receive-your-first-webhook",children:"Receive Your First Webhook"})}),"\n",(0,r.jsx)(n.p,{children:"Now that your account and destination are configured, let's send your first webhook through Relae!"}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"In this guide, you'll:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Configure your vendor to send webhooks to Relae"}),"\n",(0,r.jsx)(n.li,{children:"Trigger a test webhook event"}),"\n",(0,r.jsx)(n.li,{children:"View the event in your Relae dashboard"}),"\n",(0,r.jsx)(n.li,{children:"Verify the webhook was forwarded to your application"}),"\n",(0,r.jsx)(n.li,{children:"Validate the HMAC signature (recommended)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"step-1-configure-your-vendor",children:"Step 1: Configure Your Vendor"}),"\n",(0,r.jsx)(n.p,{children:"You need to tell your vendor (Stripe, Shopify, GitHub, etc.) to send webhooks to your Relae endpoint URL instead of directly to your application."}),"\n",(0,r.jsx)(n.h3,{id:"general-steps-all-vendors",children:"General Steps (All Vendors)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Log in to your vendor's dashboard"}),"\n",(0,r.jsx)(n.li,{children:"Navigate to webhook or API settings"}),"\n",(0,r.jsx)(n.li,{children:"Create a new webhook endpoint"}),"\n",(0,r.jsxs)(n.li,{children:["Paste your Relae endpoint URL: ",(0,r.jsx)(n.code,{children:"https://api.relaehook.com/webhook/{your-unique-id}"})]}),"\n",(0,r.jsx)(n.li,{children:"Select the events you want to receive"}),"\n",(0,r.jsx)(n.li,{children:"Save the webhook configuration"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"vendor-specific-guides",children:"Vendor-Specific Guides"}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)("b",{children:"Stripe"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Go to ",(0,r.jsx)(n.a,{href:"https://dashboard.stripe.com",children:"Stripe Dashboard"})]}),"\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"Developers"})," \u2192 ",(0,r.jsx)(n.strong,{children:"Webhooks"})]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:'"Add endpoint"'})]}),"\n",(0,r.jsxs)(n.li,{children:["Enter your Relae URL: ",(0,r.jsx)(n.code,{children:"https://api.relaehook.com/webhook/{your-id}"})]}),"\n",(0,r.jsxs)(n.li,{children:["Select events to listen to (e.g., ",(0,r.jsx)(n.code,{children:"payment_intent.succeeded"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:'"Add endpoint"'})]}),"\n",(0,r.jsxs)(n.li,{children:["Copy the ",(0,r.jsx)(n.strong,{children:"Signing secret"})," (starts with ",(0,r.jsx)(n.code,{children:"whsec_"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Go back to Relae \u2192 Destinations \u2192 Edit your Stripe destination"}),"\n",(0,r.jsxs)(n.li,{children:["Paste the signing secret in ",(0,r.jsx)(n.strong,{children:'"Vendor Webhook Secret"'})]}),"\n",(0,r.jsx)(n.li,{children:"Save"}),"\n"]})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)("b",{children:"Shopify"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Go to your Shopify Admin"}),"\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"Settings"})," \u2192 ",(0,r.jsx)(n.strong,{children:"Notifications"})]}),"\n",(0,r.jsxs)(n.li,{children:["Scroll to ",(0,r.jsx)(n.strong,{children:"Webhooks"})," section"]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:'"Create webhook"'})]}),"\n",(0,r.jsxs)(n.li,{children:["Select an event (e.g., ",(0,r.jsx)(n.code,{children:"Order creation"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["Set Format to ",(0,r.jsx)(n.strong,{children:"JSON"})]}),"\n",(0,r.jsxs)(n.li,{children:["Enter your Relae URL: ",(0,r.jsx)(n.code,{children:"https://api.relaehook.com/webhook/{your-id}"})]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:'"Save webhook"'})]}),"\n",(0,r.jsxs)(n.li,{children:["Note: Shopify doesn't show the signing secret directly - it's in the ",(0,r.jsx)(n.code,{children:"X-Shopify-Hmac-Sha256"})," header"]}),"\n"]})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)("b",{children:"GitHub"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Go to your GitHub repository"}),"\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"Settings"})," \u2192 ",(0,r.jsx)(n.strong,{children:"Webhooks"})]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:'"Add webhook"'})]}),"\n",(0,r.jsxs)(n.li,{children:["Payload URL: ",(0,r.jsx)(n.code,{children:"https://api.relaehook.com/webhook/{your-id}"})]}),"\n",(0,r.jsxs)(n.li,{children:["Content type: ",(0,r.jsx)(n.code,{children:"application/json"})]}),"\n",(0,r.jsx)(n.li,{children:"Secret: Enter a random string (you'll add this to Relae)"}),"\n",(0,r.jsx)(n.li,{children:"Select events to trigger webhook"}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:'"Add webhook"'})]}),"\n",(0,r.jsx)(n.li,{children:"Copy the secret you entered"}),"\n",(0,r.jsxs)(n.li,{children:["Add it to your Relae destination as ",(0,r.jsx)(n.strong,{children:'"Vendor Webhook Secret"'})]}),"\n"]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"/guides/common-vendors",children:"See more vendor guides \u2192"})}),"\n",(0,r.jsx)(n.h2,{id:"step-2-trigger-a-test-event",children:"Step 2: Trigger a Test Event"}),"\n",(0,r.jsx)(n.p,{children:"Most vendors let you send a test webhook. Here's how:"}),"\n",(0,r.jsx)(n.h3,{id:"stripe",children:"Stripe"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"In the Webhooks dashboard"}),"\n",(0,r.jsx)(n.li,{children:"Click on your webhook endpoint"}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:'"Send test webhook"'})]}),"\n",(0,r.jsx)(n.li,{children:"Select an event type"}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:'"Send test webhook"'})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"shopify",children:"Shopify"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Create a test order in your development store"}),"\n",(0,r.jsx)(n.li,{children:'Or use Shopify\'s "Test notification" button'}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"github",children:"GitHub"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Go to your webhook settings"}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:'"Edit"'})]}),"\n",(0,r.jsxs)(n.li,{children:["Scroll down and click ",(0,r.jsx)(n.strong,{children:'"Redeliver"'})," on a past event"]}),"\n",(0,r.jsxs)(n.li,{children:["Or push a commit to trigger a ",(0,r.jsx)(n.code,{children:"push"})," event"]}),"\n"]}),"\n",(0,r.jsxs)(n.admonition,{title:"Manual Testing",type:"tip",children:[(0,r.jsx)(n.p,{children:"You can also test with cURL:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://api.relaehook.com/webhook/{your-id} \\\n  -H "Content-Type: application/json" \\\n  -d \'{"event": "test", "message": "Hello from manual test"}\'\n'})})]}),"\n",(0,r.jsx)(n.h2,{id:"step-3-view-the-event-in-relae",children:"Step 3: View the Event in Relae"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Go to your Relae dashboard"}),"\n",(0,r.jsxs)(n.li,{children:["Click the ",(0,r.jsx)(n.strong,{children:'"Webhooks"'})," tab"]}),"\n",(0,r.jsx)(n.li,{children:"You should see your test event!"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The event will show:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Source"}),": The vendor name (e.g., ",(0,r.jsx)(n.code,{children:"stripe"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Payload"}),": Preview of the webhook data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Timestamp"}),": When it was received"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Status"}),": ",(0,r.jsx)(n.code,{children:"delivered"})," (if successful)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"click-to-view-details",children:"Click to View Details"}),"\n",(0,r.jsx)(n.p,{children:"Click on any event row to see the full details:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Complete payload (JSON)"}),"\n",(0,r.jsx)(n.li,{children:"All headers received"}),"\n",(0,r.jsx)(n.li,{children:"Response from your application"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Webhook Details Modal",src:i(6899).A+"",width:"935",height:"650"})}),"\n",(0,r.jsx)(n.h2,{id:"step-4-verify-it-reached-your-application",children:"Step 4: Verify It Reached Your Application"}),"\n",(0,r.jsx)(n.p,{children:"Now check that the webhook was forwarded to your destination URL:"}),"\n",(0,r.jsx)(n.h3,{id:"if-using-webhooksite-or-requestbin",children:"If using webhook.site or RequestBin"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Refresh the page"}),"\n",(0,r.jsx)(n.li,{children:"You should see the webhook appear with Relae's forwarded headers"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"if-using-your-own-endpoint",children:"If using your own endpoint"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Check your application logs"}),"\n",(0,r.jsx)(n.li,{children:"Look for a POST request to your webhook endpoint"}),"\n",(0,r.jsx)(n.li,{children:"Verify the payload matches what you see in Relae"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"what-gets-forwarded",children:"What Gets Forwarded?"}),"\n",(0,r.jsx)(n.p,{children:"Relae forwards the webhook with these headers:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "headers": {\n    "Content-Type": "application/json",\n    "User-Agent": "Relae-Webhook-Forwarder/1.0",\n    "X-Relae-Event-ID": "evt_abc123...",\n    "X-Relae-Source": "stripe",\n    "X-Relae-Timestamp": "1701234567",\n    "X-Relae-Signature": "t=1701234567,v1=abc123..."\n    // ... plus any custom headers you configured\n  },\n  "body": {\n    // Original webhook payload from vendor\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"header-descriptions",children:"Header Descriptions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Header"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Content-Type"})}),(0,r.jsxs)(n.td,{children:["Always ",(0,r.jsx)(n.code,{children:"application/json"})]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"application/json"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"User-Agent"})}),(0,r.jsx)(n.td,{children:"Identifies Relae as the forwarder"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Relae-Webhook-Forwarder/1.0"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"X-Relae-Event-ID"})}),(0,r.jsx)(n.td,{children:"Unique ID for this webhook event"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"evt_abc123..."})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"X-Relae-Source"})}),(0,r.jsx)(n.td,{children:"The vendor that sent the webhook"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"stripe"}),", ",(0,r.jsx)(n.code,{children:"shopify"}),", ",(0,r.jsx)(n.code,{children:"github"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"X-Relae-Timestamp"})}),(0,r.jsx)(n.td,{children:"Unix timestamp when forwarded"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"1701234567"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"X-Relae-Signature"})}),(0,r.jsx)(n.td,{children:"HMAC signature for verification"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"t=1701234567,v1=abc123..."})})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Plus any ",(0,r.jsx)(n.strong,{children:"custom headers"})," you configured for this destination."]}),"\n",(0,r.jsx)(n.h2,{id:"step-5-verify-the-hmac-signature-recommended",children:"Step 5: Verify the HMAC Signature (Recommended)"}),"\n",(0,r.jsx)(n.p,{children:"For security, you should verify that the webhook actually came from Relae and wasn't tampered with."}),"\n",(0,r.jsx)(n.h3,{id:"understanding-the-signature",children:"Understanding the Signature"}),"\n",(0,r.jsx)(n.p,{children:"Every forwarded webhook includes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"X-Relae-Signature"}),": Signature in format ",(0,r.jsx)(n.code,{children:"t=timestamp,v1=signature"})]}),"\n",(0,r.jsx)(n.li,{children:"The timestamp and HMAC-SHA256 signature combined"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"get-your-webhook-secret",children:"Get Your Webhook Secret"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Go to your Relae dashboard"}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Account"})," \u2192 ",(0,r.jsx)(n.strong,{children:"Webhooks"})," tab"]}),"\n",(0,r.jsxs)(n.li,{children:["Copy your ",(0,r.jsx)(n.strong,{children:"Relae Webhook Secret"})," (starts with ",(0,r.jsx)(n.code,{children:"whsec_"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Store it securely in your environment variables"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"verification-process",children:"Verification Process"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Extract the signature and timestamp from the ",(0,r.jsx)(n.code,{children:"X-Relae-Signature"})," header"]}),"\n",(0,r.jsxs)(n.li,{children:["Compute HMAC-SHA256 of: ",(0,r.jsx)(n.code,{children:"{timestamp}.{raw_body}"})]}),"\n",(0,r.jsx)(n.li,{children:"Compare with the signature from the header"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"code-examples",children:"Code Examples"}),"\n",(0,r.jsx)(n.h4,{id:"nodejs--express",children:"Node.js / Express"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'const crypto = require("crypto");\n\nfunction verifyRelaeWebhook(payload, signature, secret) {\n  // signature format: t=timestamp,v1=signature\n  const [t, v1] = signature.split(",").map((s) => s.split("=")[1]);\n\n  const signedPayload = `${t}.${payload}`;\n\n  const hmac = crypto\n    .createHmac("sha256", secret)\n    .update(signedPayload)\n    .digest("hex");\n\n  return crypto.timingSafeEqual(Buffer.from(v1), Buffer.from(hmac));\n}\n\n// Usage in Express\napp.post("/webhook", express.raw({ type: "application/json" }), (req, res) => {\n  const signature = req.headers["x-relae-signature"];\n  const payload = req.body.toString();\n\n  const isValid = verifyRelaeWebhook(\n    payload,\n    signature,\n    process.env.RELAE_WEBHOOK_SECRET,\n  );\n\n  if (!isValid) {\n    return res.status(401).json({ error: "Invalid signature" });\n  }\n\n  // Process webhook\n  const event = JSON.parse(payload);\n  console.log("Verified webhook:", event);\n\n  res.json({ received: true });\n});\n'})}),"\n",(0,r.jsx)(n.h4,{id:"python--flask",children:"Python / Flask"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import hmac\nimport hashlib\n\ndef verify_relae_webhook(payload: str, signature: str, secret: str) -> bool:\n    \"\"\"Verify webhook signature from Relae\"\"\"\n    # Parse signature: t=timestamp,v1=signature\n    sig_parts = dict(item.split('=') for item in signature.split(','))\n    timestamp = sig_parts.get('t')\n    received_sig = sig_parts.get('v1')\n\n    if not timestamp or not received_sig:\n        return False\n\n    # Create signed payload\n    signed_payload = f\"{timestamp}.{payload}\"\n\n    # Compute HMAC\n    expected_sig = hmac.new(\n        secret.encode('utf-8'),\n        signed_payload.encode('utf-8'),\n        hashlib.sha256\n    ).hexdigest()\n\n    # Constant-time comparison\n    return hmac.compare_digest(expected_sig, received_sig)\n\n# Usage in Flask\nfrom flask import Flask, request, jsonify\n\napp = Flask(__name__)\n\n@app.route('/webhook', methods=['POST'])\ndef webhook():\n    signature = request.headers.get('X-Relae-Signature')\n    payload = request.get_data(as_text=True)\n    secret = os.environ['RELAE_WEBHOOK_SECRET']\n\n    if not verify_relae_webhook(payload, signature, secret):\n        return jsonify({'error': 'Invalid signature'}), 401\n\n    # Process webhook\n    event = request.get_json()\n    print(f\"Verified webhook: {event}\")\n\n    return jsonify({'received': True})\n"})}),"\n",(0,r.jsx)(n.h4,{id:"go",children:"Go"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "crypto/hmac"\n    "crypto/sha256"\n    "encoding/hex"\n    "fmt"\n    "io"\n    "net/http"\n    "os"\n    "strings"\n)\n\nfunc verifyRelaeWebhook(payload, signature, secret string) bool {\n    // Parse signature: t=timestamp,v1=signature\n    parts := strings.Split(signature, ",")\n    var timestamp, sig string\n\n    for _, part := range parts {\n        kv := strings.SplitN(part, "=", 2)\n        if len(kv) != 2 {\n            continue\n        }\n        switch kv[0] {\n        case "t":\n            timestamp = kv[1]\n        case "v1":\n            sig = kv[1]\n        }\n    }\n\n    if timestamp == "" || sig == "" {\n        return false\n    }\n\n    // Create signed payload\n    signedPayload := fmt.Sprintf("%s.%s", timestamp, payload)\n\n    // Compute HMAC\n    mac := hmac.New(sha256.New, []byte(secret))\n    mac.Write([]byte(signedPayload))\n    expectedSig := hex.EncodeToString(mac.Sum(nil))\n\n    // Constant-time comparison\n    return hmac.Equal([]byte(sig), []byte(expectedSig))\n}\n\n// Usage in HTTP handler\nfunc webhookHandler(w http.ResponseWriter, r *http.Request) {\n    signature := r.Header.Get("X-Relae-Signature")\n\n    payload, err := io.ReadAll(r.Body)\n    if err != nil {\n        http.Error(w, "Failed to read body", 400)\n        return\n    }\n\n    secret := os.Getenv("RELAE_WEBHOOK_SECRET")\n\n    if !verifyRelaeWebhook(string(payload), signature, secret) {\n        http.Error(w, "Invalid signature", 401)\n        return\n    }\n\n    // Process webhook\n    var event map[string]interface{}\n    json.Unmarshal(payload, &event)\n    fmt.Printf("Verified webhook: %v\\n", event)\n\n    w.WriteHeader(200)\n    json.NewEncoder(w).Encode(map[string]bool{"received": true})\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"ruby--sinatra",children:"Ruby / Sinatra"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:"require 'openssl'\n\ndef verify_relae_webhook(payload, signature, secret)\n  # Parse signature: t=timestamp,v1=signature\n  sig_parts = signature.split(',').map { |part| part.split('=') }.to_h\n  timestamp = sig_parts['t']\n  received_sig = sig_parts['v1']\n\n  return false if timestamp.nil? || received_sig.nil?\n\n  # Create signed payload\n  signed_payload = \"#{timestamp}.#{payload}\"\n\n  # Compute HMAC\n  expected_sig = OpenSSL::HMAC.hexdigest(\n    OpenSSL::Digest.new('sha256'),\n    secret,\n    signed_payload\n  )\n\n  # Constant-time comparison\n  Rack::Utils.secure_compare(expected_sig, received_sig)\nend\n\n# Usage in Sinatra\npost '/webhook' do\n  request.body.rewind\n  payload = request.body.read\n  signature = request.env['HTTP_X_RELAE_SIGNATURE']\n  secret = ENV['RELAE_WEBHOOK_SECRET']\n\n  unless verify_relae_webhook(payload, signature, secret)\n    halt 401, { error: 'Invalid signature' }.to_json\n  end\n\n  # Process webhook\n  event = JSON.parse(payload)\n  puts \"Verified webhook: #{event}\"\n\n  { received: true }.to_json\nend\n"})}),"\n",(0,r.jsx)(n.h4,{id:"php",children:"PHP"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"<?php\nfunction verifyRelaeWebhook($payload, $signature, $secret) {\n    // Parse signature: t=timestamp,v1=signature\n    $parts = explode(',', $signature);\n    $timestamp = null;\n    $sig = null;\n\n    foreach ($parts as $part) {\n        list($key, $value) = explode('=', $part, 2);\n        if ($key === 't') {\n            $timestamp = $value;\n        } elseif ($key === 'v1') {\n            $sig = $value;\n        }\n    }\n\n    if (!$timestamp || !$sig) {\n        return false;\n    }\n\n    // Create signed payload\n    $signedPayload = $timestamp . '.' . $payload;\n\n    // Compute HMAC\n    $expectedSig = hash_hmac('sha256', $signedPayload, $secret);\n\n    // Constant-time comparison\n    return hash_equals($expectedSig, $sig);\n}\n\n// Usage\n$payload = file_get_contents('php://input');\n$signature = $_SERVER['HTTP_X_RELAE_SIGNATURE'] ?? '';\n$secret = getenv('RELAE_WEBHOOK_SECRET');\n\nif (!verifyRelaeWebhook($payload, $signature, $secret)) {\n    http_response_code(401);\n    echo json_encode(['error' => 'Invalid signature']);\n    exit;\n}\n\n// Process webhook\n$event = json_decode($payload, true);\nerror_log('Verified webhook: ' . print_r($event, true));\n\nhttp_response_code(200);\necho json_encode(['received' => true]);\n?>\n"})}),"\n",(0,r.jsxs)(n.admonition,{title:"Timestamp Tolerance",type:"tip",children:[(0,r.jsx)(n.p,{children:"Include a tolerance check to prevent replay attacks:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'const TOLERANCE_SECONDS = 300; // 5 minutes\nconst now = Math.floor(Date.now() / 1000);\n\nif (Math.abs(now - parseInt(timestamp)) > TOLERANCE_SECONDS) {\n  return res.status(401).send("Timestamp too old");\n}\n'})})]}),"\n",(0,r.jsxs)(n.admonition,{title:"Where to Find Your Secret",type:"info",children:[(0,r.jsx)(n.p,{children:"Get your Relae webhook secret from:"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Dashboard \u2192 Account \u2192 Webhooks tab"}),"\n",(0,r.jsx)(n.li,{children:'Look for "Relae Webhook Secret"'}),"\n",(0,r.jsxs)(n.li,{children:["Copy the value (starts with ",(0,r.jsx)(n.code,{children:"whsec_"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["Store in environment variable: ",(0,r.jsx)(n.code,{children:"RELAE_WEBHOOK_SECRET"})]}),"\n"]})]}),"\n",(0,r.jsx)(n.h2,{id:"step-6-test-failure-scenarios",children:"Step 6: Test Failure Scenarios"}),"\n",(0,r.jsx)(n.p,{children:"Let's test what happens when your application is down or returns an error:"}),"\n",(0,r.jsx)(n.h3,{id:"simulate-a-failure",children:"Simulate a Failure"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Temporarily shut down your application (or change the destination URL to something invalid)"}),"\n",(0,r.jsx)(n.li,{children:"Trigger another test webhook from your vendor"}),"\n",(0,r.jsx)(n.li,{children:"Watch what happens in Relae"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"what-youll-see",children:"What You'll See"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Webhooks tab"}),": Event appears with status ",(0,r.jsx)(n.code,{children:"pending"})," or ",(0,r.jsx)(n.code,{children:"failed"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Automatic retries"}),": Relae retries up to 5 times with exponential backoff","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"1st retry: Immediate"}),"\n",(0,r.jsx)(n.li,{children:"2nd retry: After 5 seconds"}),"\n",(0,r.jsx)(n.li,{children:"3rd retry: After 25 seconds"}),"\n",(0,r.jsx)(n.li,{children:"4th retry: After 125 seconds"}),"\n",(0,r.jsx)(n.li,{children:"5th retry: After 625 seconds"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dead Letter Queue"}),": After 5 failures, event moves to the DLQ tab"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"manual-retry-from-dlq",children:"Manual Retry from DLQ"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Go to the ",(0,r.jsx)(n.strong,{children:'"Dead Letter Queue"'})," tab"]}),"\n",(0,r.jsx)(n.li,{children:"Find your failed event"}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:'"Retry"'})," button"]}),"\n",(0,r.jsx)(n.li,{children:"Event is reprocessed and forwarded again"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Dead Letter Queue",src:i(7327).A+"",width:"1399",height:"882"})}),"\n",(0,r.jsx)(n.h2,{id:"success-",children:"Success! \ud83c\udf89"}),"\n",(0,r.jsx)(n.p,{children:"Congratulations! You've successfully:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Created a Relae account"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Configured a destination"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Set up your vendor to send webhooks to Relae"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Received and forwarded your first webhook"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Verified the HMAC signature"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Tested the failure/retry mechanism"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(n.p,{children:"Now that you're set up, explore more features:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/core-concepts/events",children:"Learn about Events \u2192"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/core-concepts/retries",children:"Understand the Retry Logic \u2192"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/guides/analytics",children:"View Analytics \u2192"})," (Scale tier)"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/guides/common-vendors",children:"Set up Multiple Vendors \u2192"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"need-help",children:"Need Help?"}),"\n",(0,r.jsx)(n.p,{children:"If something isn't working:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Check the ",(0,r.jsx)(n.a,{href:"#troubleshooting",children:"Troubleshooting"})," section below"]}),"\n",(0,r.jsxs)(n.li,{children:["Review the ",(0,r.jsx)(n.a,{href:"/guides/verifying-signatures",children:"Verifying Signatures Guide"})]}),"\n",(0,r.jsxs)(n.li,{children:["Email us at ",(0,r.jsx)(n.a,{href:"mailto:support@relaehook.com",children:"support@relaehook.com"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)("b",{children:"Event not showing in Relae dashboard"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Possible causes:"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Vendor sent webhook to wrong URL"}),"\n",(0,r.jsx)(n.li,{children:"Webhook signature verification failed (invalid secret)"}),"\n",(0,r.jsx)(n.li,{children:"Vendor didn't trigger the webhook"}),"\n"]}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Solutions:"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Double-check the endpoint URL in vendor settings"}),"\n",(0,r.jsx)(n.li,{children:"Verify the webhook secret is correct in both places"}),"\n",(0,r.jsx)(n.li,{children:"Check vendor's webhook logs for delivery attempts"}),"\n",(0,r.jsx)(n.li,{children:"Try sending a test webhook from vendor dashboard"}),"\n"]})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)("b",{children:"Event in Relae but not reaching my application"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Possible causes:"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Incorrect destination URL"}),"\n",(0,r.jsx)(n.li,{children:"Your application is down or returning errors"}),"\n",(0,r.jsx)(n.li,{children:"Firewall blocking Relae's IP addresses"}),"\n"]}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Solutions:"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Verify destination URL is correct and accessible"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Check your application logs for errors"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Test destination URL with curl:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://your-destination-url.com/webhook \\\n  -H "Content-Type: application/json" \\\n  -d \'{"test": true}\'\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Whitelist Relae's IP ranges (contact support for list)"}),"\n"]}),"\n"]})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)("b",{children:"Signature verification failing"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Possible causes:"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Using wrong endpoint token"}),"\n",(0,r.jsx)(n.li,{children:"Body being modified before verification"}),"\n",(0,r.jsx)(n.li,{children:"Timestamp tolerance too strict"}),"\n"]}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Solutions:"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Copy endpoint token from Relae destination settings"}),"\n",(0,r.jsx)(n.li,{children:"Verify raw body before any parsing or modifications"}),"\n",(0,r.jsx)(n.li,{children:"Add timestamp tolerance (5-10 minutes)"}),"\n",(0,r.jsxs)(n.li,{children:["Check that signature format is ",(0,r.jsx)(n.code,{children:"sha256={hash}"})]}),"\n",(0,r.jsx)(n.li,{children:"Enable debug logging to see computed vs. expected signatures"}),"\n"]})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)("b",{children:"Events going to DLQ immediately"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Possible causes:"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Destination URL returning 4xx/5xx errors"}),"\n",(0,r.jsx)(n.li,{children:"Destination URL unreachable"}),"\n",(0,r.jsx)(n.li,{children:"SSL/TLS certificate issues"}),"\n"]}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Solutions:"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Check destination URL returns 2xx status codes"}),"\n",(0,r.jsx)(n.li,{children:"Verify SSL certificate is valid"}),"\n",(0,r.jsx)(n.li,{children:"Test with curl to see exact error"}),"\n",(0,r.jsx)(n.li,{children:"Check application logs for errors"}),"\n",(0,r.jsx)(n.li,{children:"Try a test destination URL (webhook.site) first"}),"\n"]})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);